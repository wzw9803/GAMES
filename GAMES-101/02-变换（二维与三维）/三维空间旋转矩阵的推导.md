## 三维空间旋转矩阵的推导

### 绕**x轴**，**y轴**，**z轴**旋转：

3维旋转有3个矩阵，分别对应绕**x轴**，**y轴**，**z轴**旋转，同时有很关键的一点要注意！我们所采用的是**右手系**，因此旋转是有定向(orientation)正如在二维，是x轴向y轴旋转，对应到3维便是绕z轴旋转(x轴转向y轴)，不难推出绕x轴旋转(y转向z)，绕y轴旋转(z转向x), 如果想不明白，右手螺旋定则试一试就知道了！ x->y->z->x…
因此理解了上面这个来看绕x和z旋转的变换矩阵

![](https://gitee.com/wzw9803/wzwImages/raw/master/img/20200604234051.png)

(绕z轴，故z不变，且x转向y)

![](https://gitee.com/wzw9803/wzwImages/raw/master/img/20200604234105.png)

(绕x轴，故x不变，且y转向z)
绕y轴会有一点不同，但只要记住需要z转向x，很快便能反应过来

![](https://gitee.com/wzw9803/wzwImages/raw/master/img/20200604234121.png)

其实到这里可以下一个结论，可以看到任意旋转都是正交矩阵!，因此他们的逆便是他们的转置，而一个旋转矩阵的逆所对应的几何解释便是，我反着转这么多，比如我逆时针转30°，转置便是顺时针30°

> 注：以上所有的旋转都是针对原点来说，那么如何对围绕任何一个轴(3维)旋转呢
>

### 绕任意轴旋转：

我们只有绕x，y, z旋转的方法，怎么随便给一个轴让你绕着他旋转呢！很直观的，我们把该轴给先旋转到任意的x，y，z轴上，然后就可以应用基本的旋转矩阵，最后再逆旋转回来即可，表示如下：
$$
R1RxR1^T * (x,y,z)^T
$$
这里的 $Rx$ 是知道的，问题只剩怎么求 $R1$ 了，设我们想围绕旋转的轴为 $u$ ，$R1$ 便是将 $u$ 旋转到 $x$ 的矩阵。
具体来说这里我们需要以 $u$ 为一轴，构造一个3维正交坐标系，然后将 $u-x$ 对齐，那么其它两轴就肯定和 $y$ 和 $z$ 对齐了！
构造如下，任取 $-t$ 方向不与 $u$ 重合

w = t x u
v = u x w

此时$u$ , $w$ , $v$ 便是我们构造出的新坐标系(这里运用了一些叉乘的小知识，读者不理解可取自行去了解一下叉乘几何含义再来看此式)。

好了，现在得到了$u$ ,$w$ ,$v$ 对应 $x$ ,$y$ ,$z$ 如何将我们的新坐标系与原始坐标系重合呢，哈哈，这其实再简单不过了，我们取$R1 = (u,w,v)$, 该旋转矩阵的含义便是将 $x,y,z$ 旋转到 $u，w，v$ 的旋转矩阵(不信可以直接$R1 * x，R1y，R1z$试试便一目了然)，还记得什么？我们上一节曾总结到，旋转矩阵是正交矩阵，旋转矩阵的转置便是它的逆，也是几何意义上的反作用，因此！$R^T $T便是将 $u,w,v$ 旋转到 $x,y,z$ 的矩阵了。现在我们知道了 $R1$ 知道了 $RX$ ，那么围绕位移轴的旋转也就得到了！

![](https://gitee.com/wzw9803/wzwImages/raw/master/img/20200605000005.png)

中间那个矩阵换成  $rotate−x(ϕ)$ 就好啦，书上的图懒得改了！

> Tips:如果读者对线性代数不熟悉，或是没有很直观的几何理解的话，强烈推荐[3blue1brown的线代本质](https://www.bilibili.com/video/BV1Ys411k7yQ?from=search&seid=15562968547395149083).真的是带你走进全新版本，哈哈哈。

